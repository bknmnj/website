---
import content from "../../public/data/content.json";
const today = new Date().toISOString().split("T")[0];
const formattedDate = new Date(today).toLocaleDateString('en-US', {
  month: 'numeric',
  day: 'numeric',
  year: 'numeric'
});
const response = await fetch(`https://www.hebcal.com/zmanim?cfg=json&zip=${content.home.zip}&date=${today}`);
const data = await response.json();
const zmanim = data.times;

const formatTime = (timeString: string) => {
  if (!timeString) return "N/A";
  const date = new Date(timeString);
  return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
};
---

<div class="bg-white rounded-lg shadow p-6">
  <h2 class="text-lg font-semibold mb-2 flex items-center">
    <span class="text-[#D4A373] mr-2">‚óè</span> Today's Zmanim
  </h2>
  <p class="text-gray-600 mb-4">Date: {formattedDate}, Source: Hebcal</p>
  <div class="grid gap-2 text-xs sm:text-sm">
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Alos HaShachar:</span>
      <span class="font-bold">{formatTime(zmanim.alotHaShachar)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Earliest Tallis and Tefillin (Misheyakir):</span>
      <span class="font-bold">{formatTime(zmanim.misheyakir)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Netz (Sunrise):</span>
      <span class="font-bold">{formatTime(zmanim.sunrise)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Sof Zman Shema:</span>
      <span class="font-bold">{formatTime(zmanim.sofZmanShma)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Sof Zman Tefillah:</span>
      <span class="font-bold">{formatTime(zmanim.sofZmanTfilla)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Chatzos (Midday):</span>
      <span class="font-bold">{formatTime(zmanim.chatzot)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Mincha Gedola:</span>
      <span class="font-bold">{formatTime(zmanim.minchaGedola)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Mincha Ketana:</span>
      <span class="font-bold">{formatTime(zmanim.minchaKetana)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Plag HaMincha:</span>
      <span class="font-bold">{formatTime(zmanim.plagHaMincha)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Shkiah (Sunset):</span>
      <span class="font-bold">{formatTime(zmanim.sunset)}</span>
    </div>
    <div class="flex justify-between even:bg-gray-50 p-1">
      <span>Tzeis (72 min):</span>
      <span class="font-bold">{formatTime(zmanim.tzeit72min)}</span>
    </div>
  </div>
</div> 